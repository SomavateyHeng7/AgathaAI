(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,r)=>{t.exports=e.r(76562)},22530,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let a=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:i="",children:n,iconNode:d,...c},g)=>(0,r.createElement)("svg",{ref:g,...l,width:t,height:t,stroke:e,strokeWidth:o?24*Number(s)/Number(t):s,className:a("lucide",i),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),i=(e,t)=>{let l=(0,r.forwardRef)(({className:l,...i},n)=>(0,r.createElement)(o,{ref:n,iconNode:t,className:a(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...i}));return l.displayName=s(e),l},n=i("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),d=i("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);var c=e.i(63178);function g(){let[e,a]=(0,r.useState)(!1),{theme:s,setTheme:l,systemTheme:o}=(0,c.useTheme)();if((0,r.useEffect)(()=>{a(!0)},[]),!e)return(0,t.jsx)("button",{className:"p-2 rounded-lg border border-gray-700 bg-gray-800",children:(0,t.jsx)("div",{className:"w-5 h-5"})});let i="system"===s?o:s,g="dark"===i;return(0,t.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();let t=g?"light":"dark";console.log("Toggling theme from",i,"to",t),l(t)},onMouseDown:e=>e.stopPropagation(),className:"p-2 rounded-lg border border-gray-700 bg-gray-800 hover:bg-gray-700 transition-colors cursor-pointer","aria-label":`Switch to ${g?"light":"dark"} mode`,title:`Switch to ${g?"light":"dark"} mode`,type:"button",children:g?(0,t.jsx)(d,{className:"w-5 h-5 text-yellow-400"}):(0,t.jsx)(n,{className:"w-5 h-5 text-gray-300"})})}e.s(["ThemeToggle",()=>g],22530)},21443,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(17255),s=e.i(18566),l=e.i(22530);let o=[{value:"gpt-4",label:"GPT-4",provider:"OpenAI"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",provider:"OpenAI"},{value:"gpt-4-turbo",label:"GPT-4 Turbo",provider:"OpenAI"},{value:"gemini-2.5-flash",label:"Gemini 2.5 Flash",provider:"Google"},{value:"gemini-2.0-flash",label:"Gemini 2.0 Flash",provider:"Google"}];function i(){let{data:e,status:i}=(0,a.useSession)(),n=(0,s.useRouter)(),[d,c]=(0,r.useState)(""),[g,m]=(0,r.useState)("gpt-3.5-turbo"),[h,x]=(0,r.useState)([]),[u,b]=(0,r.useState)([]),[y,p]=(0,r.useState)(null),[f,v]=(0,r.useState)(!1),[k,j]=(0,r.useState)(!0),[w,N]=(0,r.useState)(!1),[C,S]=(0,r.useState)(null),I=(0,r.useRef)(null);(0,r.useEffect)(()=>{if("unauthenticated"===i)n.push("/signin");else if("authenticated"===i){A();let e=localStorage.getItem("lastConversationId");e&&T(e)}},[i,n]),(0,r.useEffect)(()=>{I.current?.scrollIntoView({behavior:"smooth"})},[h]);let A=async()=>{try{let e=await fetch("/api/chat/conversations");if(e.ok){let t=await e.json();b(t.conversations)}}catch(e){console.error("Failed to load conversations:",e)}},T=async e=>{try{let t=await fetch(`/api/chat/conversations/${e}`);if(t.ok){let r=await t.json();x(r.messages),p(e),m(r.conversation.model),localStorage.setItem("lastConversationId",e)}}catch(e){console.error("Failed to load conversation:",e)}},L=async e=>{if(e.preventDefault(),!d.trim()||f)return;let t={id:Date.now().toString(),role:"user",content:d,created_at:new Date().toISOString()};x(e=>[...e,t]),c(""),v(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:y,message:d,model:g})});if(e.ok){let t=await e.json(),r={id:(Date.now()+1).toString(),role:"assistant",content:t.message,model:t.model,created_at:new Date().toISOString()};x(e=>[...e,r]),y||(p(t.conversationId),localStorage.setItem("lastConversationId",t.conversationId),A())}else{let t=await e.json();alert(t.error||"Failed to send message")}}catch(e){console.error("Chat error:",e),alert("Failed to send message")}finally{v(!1)}},M=()=>{x([]),p(null),localStorage.removeItem("lastConversationId")},D=async e=>{S(e),N(!0)},P=async()=>{if(C)try{(await fetch(`/api/chat/conversations/${C}`,{method:"DELETE"})).ok&&(y===C?M():A())}catch(e){console.error("Failed to delete conversation:",e)}finally{N(!1),S(null)}};return"loading"===i?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-950",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mb-4 inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-blue-500 border-r-transparent"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Loading..."})]})}):(0,t.jsxs)("div",{className:"flex h-screen bg-white dark:bg-gray-950",children:[(0,t.jsxs)("div",{className:`${k?"w-64":"w-0"} border-r border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900 transition-all duration-300 overflow-hidden flex flex-col`,children:[(0,t.jsx)("div",{className:"p-4 border-gray-200 dark:border-gray-800",children:(0,t.jsxs)("button",{onClick:M,className:"w-full flex items-center gap-2 rounded-lg bg-blue-600 dark:bg-white px-4 py-2.5 text-sm font-medium text-white dark:text-gray-900 hover:bg-blue-700 dark:hover:bg-gray-200",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New chat"]})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-3",children:[(0,t.jsx)("h3",{className:"mb-2 px-2 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:"Recent Chats"}),u.map(e=>(0,t.jsxs)("div",{className:"group relative mb-1",children:[(0,t.jsxs)("button",{onClick:()=>T(e.id),className:`w-full rounded-lg px-3 py-2 text-left text-sm hover:bg-gray-200 dark:hover:bg-gray-800 ${y===e.id?"bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"h-4 w-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),(0,t.jsx)("span",{className:"flex-1 truncate",children:e.title})]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:[e.message_count," messages Â· ",e.model]})]}),(0,t.jsx)("button",{onClick:()=>D(e.id),className:"absolute right-2 top-2 hidden rounded p-1 hover:bg-gray-300 dark:hover:bg-gray-700 group-hover:block",children:(0,t.jsx)("svg",{className:"h-4 w-4 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))]}),(0,t.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-800 p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-lg px-2 py-2",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-sm font-semibold text-white",children:e?.user?.name?.[0]||e?.user?.email?.[0]||"U"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,t.jsx)("p",{className:"truncate text-sm font-medium text-gray-900 dark:text-white",children:e?.user?.name||"User"}),(0,t.jsx)("p",{className:"truncate text-xs text-gray-500 dark:text-gray-400",children:e?.user?.tier||"free"})]}),(0,t.jsx)("button",{onClick:()=>(0,a.signOut)({callbackUrl:"/signin"}),className:"rounded-lg p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white",title:"Sign out",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-800 px-6 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>j(!k),className:"rounded-lg p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,t.jsx)("select",{value:g,onChange:e=>m(e.target.value),className:"rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-3 py-1.5 text-sm text-gray-900 dark:text-white focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:o.map(e=>(0,t.jsxs)("option",{value:e.value,children:[e.label," (",e.provider,")"]},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.ThemeToggle,{}),(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"GenAI Platform"}),(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 text-sm font-bold text-white",children:"AI"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===h.length?(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center px-4",children:[(0,t.jsx)("h1",{className:"mb-8 text-4xl font-semibold text-gray-900 dark:text-white",children:"What's on your mind today?"}),(0,t.jsx)("div",{className:"grid w-full max-w-3xl grid-cols-1 gap-3 sm:grid-cols-2",children:[{title:"Explain quantum computing",subtitle:"in simple terms"},{title:"Write a Python function",subtitle:"to calculate fibonacci"},{title:"Design a REST API",subtitle:"for user authentication"},{title:"Optimize database queries",subtitle:"for better performance"}].map((e,r)=>(0,t.jsxs)("button",{onClick:()=>c(e.title),className:"rounded-xl border border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-900 p-4 text-left hover:bg-gray-100 dark:hover:bg-gray-800",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:e.subtitle})]},r))})]}):(0,t.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[h.map((r,a)=>(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:["user"===r.role?(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 text-sm font-semibold text-white",children:e?.user?.name?.[0]||"U"}):(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-sm font-bold text-white",children:"AI"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"user"===r.role?"You":r.model||"Assistant"})]}),(0,t.jsx)("div",{className:"ml-11 whitespace-pre-wrap text-gray-700 dark:text-gray-300",children:r.content})]},a)),f&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-sm font-bold text-white",children:"AI"}),(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:g})]}),(0,t.jsxs)("div",{className:"ml-11 flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[(0,t.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-500 dark:bg-gray-400",style:{animationDelay:"0ms"}}),(0,t.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-500 dark:bg-gray-400",style:{animationDelay:"150ms"}}),(0,t.jsx)("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-500 dark:bg-gray-400",style:{animationDelay:"300ms"}})]})]}),(0,t.jsx)("div",{ref:I})]})}),(0,t.jsx)("div",{className:" border-gray-200 dark:border-gray-800 p-4",children:(0,t.jsxs)("form",{onSubmit:L,className:"mx-auto max-w-3xl",children:[(0,t.jsxs)("div",{className:"relative flex items-center gap-3 rounded-2xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 px-4 py-3 focus-within:border-blue-500 dark:focus-within:border-gray-600",children:[(0,t.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Ask anything",className:"flex-1 bg-transparent text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none",disabled:f}),(0,t.jsx)("button",{type:"submit",disabled:!d.trim()||f,className:"rounded-lg bg-blue-600 dark:bg-white p-2 text-white dark:text-gray-900 hover:bg-blue-700 dark:hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})]}),(0,t.jsx)("p",{className:"mt-2 text-center text-xs text-gray-500 dark:text-gray-500",children:"AgathaAI Platform can make mistakes. Check important info."})]})})]}),w&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:()=>{N(!1),S(null)},children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#2f2f2f] p-6 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h3",{className:"mb-3 text-lg font-semibold text-gray-900 dark:text-white",children:"Delete chat?"}),(0,t.jsxs)("p",{className:"mb-2 text-sm text-gray-700 dark:text-gray-300",children:["This will delete"," ",(0,t.jsx)("strong",{children:u.find(e=>e.id===C)?.title||"this conversation"}),"."]}),(0,t.jsx)("p",{className:"mb-6 text-sm text-gray-500 dark:text-gray-400",children:"Visit settings to delete any memories saved during this chat."}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{N(!1),S(null)},className:"rounded-lg px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-white hover:bg-gray-100 dark:hover:bg-[#3f3f3f] transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:P,className:"rounded-lg bg-[#d92d20] px-4 py-2.5 text-sm font-medium text-white hover:bg-[#c02717] transition-colors",children:"Delete"})]})]})})]})}e.s(["default",()=>i])}]);